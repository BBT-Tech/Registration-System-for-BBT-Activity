webpackJsonp([5],{"/Wh7":function(t,e){},xJsL:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"Login",components:{"input-tips":s("aAmI").a},data:function(){return{studentId:"",password:"",inputtingId:!0,inputtingPsw:!0,loading:!1}},beforeCreate:function(){this.$root.logined&&this.$root.$router.replace("/activity")},mounted:function(){window.addEventListener("keydown",this.pressEnter)},computed:{isIdValid:function(){return-1!==this.studentId.search(/^\d{12}$/)},isPswValid:function(){return""!==this.password}},methods:{login:function(){var t=this;t.loading=!0,t.$http.post("/api/login.php",{student_id:t.studentId,password:t.password}).then(function(e){(e=e.body)instanceof Object?e.err_code>0?alert(e.err_msg):e.err_code<0?confirm(e.err_msg)&&(window.location.href="https://hemc.100steps.net/2013/bbter/users"):(e=e.data,t.$root.logined=!0,t.$root.studentId=t.studentId,t.$root.name=e.name,t.$root.isManager=e.is_manager,window.removeEventListener("keydown",t.pressEnter),t.$root.$router.replace("/activity")):alert("服务器发生错误"),t.loading=!1}).catch(function(e){alert("404！该服务暂时不可用"),t.loading=!1})},pressEnter:function(t){13===(t.keyCode||t.charCode)&&this.isIdValid&&this.isPswValid&&this.login()}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("input-tips",{attrs:{"err-when":!t.isIdValid},model:{value:t.studentId,callback:function(e){t.studentId=e},expression:"studentId"}},[s("span",{attrs:{slot:"title"},slot:"title"},[t._v("学号：")]),t._v(" "),s("span",{attrs:{slot:"tips"},slot:"tips"},[t._v("学号不符合格式")])]),t._v(" "),s("input-tips",{attrs:{type:"password","err-when":!t.isPswValid},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[s("span",{attrs:{slot:"title"},slot:"title"},[t._v("密码：")]),t._v(" "),s("span",{attrs:{slot:"tips"},slot:"tips"},[t._v("密码不符合格式")])]),t._v(" "),t.isIdValid&&t.isPswValid&&!t.loading?s("button",{on:{click:t.login}},[t._v("登录")]):t._e(),t._v(" "),t.loading?s("span",[t._v("Loading...")]):t._e()],1)},staticRenderFns:[]};var o=s("VU/8")(n,i,!1,function(t){s("/Wh7")},"data-v-46d10190",null);e.default=o.exports}});
//# sourceMappingURL=5.88a6a0c4b3d5d9374041.js.map