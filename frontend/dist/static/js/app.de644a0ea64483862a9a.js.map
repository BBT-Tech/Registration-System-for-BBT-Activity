{"version":3,"sources":["webpack:///./src/router/index.js","webpack:///./src/global.js","webpack:///src/App.vue","webpack:///./src/App.vue?93b7","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["vue_esm","use","vue_router_esm","router","routes","path","name","component","__webpack_require__","e","then","bind","Promise","all","children","meta","queryTypes","redirect","global","logined","studengId","isManager","departmentList","defaultImg","getCookie","str","pattern","RegExp","document","cookie","replace","removeCookie","now","Date","setTime","getTime","toUTCString","compareDatetime","datetime","comparison","slice","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","i","Number","datetimeToInput","inputToDatetime","input","App","data","appWidth","undefined","created","this","flushSize","window","addEventListener","methods","width","body","clientWidth","selectortype_template_index_0_src_App","render","_h","$createElement","_c","_self","attrs","id","_v","style","fontSize","staticRenderFns","isChecked","src_App","normalizeComponent","ssrContext","vue_resource_esm","config","productionTip","prototype","$global","beforeEach","to","from","next","http","post","Object","promise_default","a","reject","err_code","err_msg","studentId","student_id","is_manager","fullPath","search","type","start_id","params","number","activities","Array","length","activity","timeAccess","action_time","book_time","is_publisher","catch","alert","el","components","template"],"mappings":"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","file":"static/js/app.de644a0ea64483862a9a.js","sourcesContent":["import Vue from 'vue'\nimport Router from 'vue-router'\nconst Login = () => import('@/components/Login')\nconst Activity = () => import('@/components/Activity')\nconst ActivityHome = () => import('@/components/ActivityHome')\nconst ActivityDetails = () => import('@/components/ActivityDetails')\nconst ActivityCreator = () => import('@/components/ActivityCreator')\nconst ActivityEditor = () => import('@/components/ActivityEditor')\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/login',\n      name: 'Login',\n      component: Login\n    },\n    {\n      path: '/activity',\n      component: Activity,\n      children: [\n        {\n          path: '',\n          name: 'ActivityHome',\n          component: ActivityHome,\n          meta: {\n            queryTypes: ['所有', '我参与', '未参与']\n          }\n        },\n        {\n          path: 'publish',\n          name: 'ActivityCreator',\n          component: ActivityCreator,\n          meta: {\n            queryTypes: ['发起活动']\n          }\n        },\n        {\n          path: ':id/edit',\n          name: 'ActivityEditor',\n          component: ActivityEditor,\n          meta: {\n            queryTypes: ['修改活动']\n          }\n        },\n        {\n          path: ':id',\n          name: 'ActivityDetails',\n          component: ActivityDetails,\n          meta: {\n            queryTypes: ['活动详情', '各部门情况']\n          }\n        }\n      ]\n    },\n    {\n      path: '*',\n      redirect: '/login'\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","export default {\r\n  logined: false,\r\n  studengId: '',\r\n  name: '',\r\n  isManager: false,\r\n  departmentList: [\r\n    '编辑部',\r\n    '综合管理部',\r\n    '综合新闻部',\r\n    '外联部',\r\n    '策划推广部',\r\n    '节目部',\r\n    '人力资源部',\r\n    '技术部',\r\n    '视频部',\r\n    '视觉设计部'\r\n  ],\r\n  defaultImg: 'http://localhost/api/assets/img/default.png',\r\n  getCookie (str) {\r\n    var pattern = new RegExp('(?:(?:^|.*;\\\\s*)' + str + '\\\\s*=\\\\s*([^;]*).*$)|^.*$')\r\n    return document.cookie.replace(pattern, '$1')\r\n  },\r\n  removeCookie (str) {\r\n    var now = new Date()\r\n    now.setTime(now.getTime() - 1)\r\n    document.cookie = str + '=;expires=' + now.toUTCString()\r\n  },\r\n  compareDatetime (datetime) {\r\n    var now = new Date()\r\n    var comparison = [\r\n      [datetime.slice(0, 4), now.getFullYear()],\r\n      [datetime.slice(5, 7), now.getMonth() + 1],\r\n      [datetime.slice(8, 10), now.getDate()],\r\n      [datetime.slice(11, 13), now.getHours()],\r\n      [datetime.slice(14, 16), now.getMinutes()],\r\n      [datetime.slice(17, 19), now.getSeconds()]\r\n    ]\r\n    for (let i = 0; i < 6; i++) {\r\n      comparison[i][0] = Number(comparison[i][0])\r\n      if (comparison[i][0] !== comparison[i][1]) {\r\n        return comparison[i][0] - comparison[i][1]\r\n      }\r\n    }\r\n    return 0\r\n  },\r\n  datetimeToInput (datetime) {\r\n    return datetime.replace(/^(\\d{4}-\\d{2}-\\d{2}) (\\d{2}:\\d{2}):\\d{2}$/, '$1T$2')\r\n  },\r\n  inputToDatetime (input) {\r\n    return input.slice(0, 10) + ' ' + input.slice(11) + ':00'\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/global.js","<template>\n  <div id=\"app\">\n    <div id=\"global-bg\"></div>\n    <router-view\n      v-bind:style=\"{fontSize: appWidth + 'px'}\"\n    />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App',\n  data () {\n    return {\n      appWidth: undefined\n    }\n  },\n  created () {\n    this.flushSize()\n    window.addEventListener('resize', this.flushSize)\n  },\n  methods: {\n    flushSize () {\n      var width = document.body.clientWidth\n      if (width < 300) {\n        width = 300\n      } else if (width > 450) {\n        width = 450\n      }\n      this.appWidth = width / 1080 * 100\n    }\n  }\n}\n</script>\n\n<style>\n* {\n  margin: 0;\n  padding: 0;\n  font-family: '微软雅黑';\n}\nhtml {\n  width: 100%;\n  height: 100%;\n}\nbody {\n  width: 100%;\n  height: 100%;\n}\ninput {\n  border: none;\n  outline: none;\n}\n#app {\n  position: relative;\n  margin: auto;\n  width: 500px;\n  height: 100%;\n}\n@media screen and (max-width: 500px) {\n  #app {\n    width: 100%;\n  }\n}\n#global-bg {\n  z-index: -1;\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: linear-gradient(145deg, #a1dd93, #16a086);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{attrs:{\"id\":\"global-bg\"}}),_vm._v(\" \"),_c('router-view',{style:({fontSize: _vm.appWidth + 'px'})})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-721b61ff\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-721b61ff\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-721b61ff\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport router from './router'\nimport VueResource from 'vue-resource'\nimport Global from './global'\n\nimport App from './App'\n\nVue.use(VueResource)\nVue.config.productionTip = false\nVue.prototype.$global = Global\n\nrouter.beforeEach((() => {\n  var isChecked = false\n  return (to, from, next) => {\n    if (!isChecked) {\n      isChecked = true\n      Vue.http.post('/api/init.php').then(data => {\n        data = data.body\n        if (!(data instanceof Object)) {\n          return Promise.reject('服务器发生错误')\n        } else if (data.err_code) {\n          return Promise.reject(data.err_msg)\n        } else {\n          data = data.data\n          if (data.logined) {\n            Global.logined = true\n            Global.studentId = data.student_id\n            Global.name = data.name\n            Global.isManager = data.is_manager\n          }\n        }\n        if (to.fullPath === '/login') {\n          if (Global.logined) {\n            next({\n              path: '/activity'\n            })\n          }\n        } else {\n          if (!Global.logined) {\n            next({\n              path: '/login'\n            })\n          } else if (to.fullPath.search(/^\\/activity\\/\\d+\\/edit$/) !== -1) {\n            return Vue.http.post('/api/get-activity.php', {\n              type: 0,\n              start_id: to.params.id,\n              number: 1\n            })\n          }\n        }\n        return Promise.reject(0)\n      }).then(data => {\n        data = data.body\n        if (!(data instanceof Object)) {\n          return Promise.reject('服务器发生错误')\n        } else if (data.err_code) {\n          return Promise.reject(data.err_msg)\n        } else {\n          data = data.data\n          if (data.activities instanceof Array &&\n            data.activities.length === 1 &&\n            data.activities[0].id === Number(to.params.id)) {\n            let activity = data.activities[0]\n            let timeAccess = false\n            if (activity.type === 0) {\n              timeAccess = Global.compareDatetime(activity.action_time) > 0\n            } else if (activity.type === 1) {\n              timeAccess = Global.compareDatetime(activity.book_time) > 0\n            }\n            if (!(timeAccess && activity.is_publisher)) {\n              return Promise.reject('你没有修改权限')\n            }\n          } else {\n            return Promise.reject('活动不存在')\n          }\n        }\n      }).catch(data => {\n        if (data === 0) {\n        } else if (typeof data === 'string') {\n          alert(data)\n        } else {\n          alert('服务器发生错误')\n          next({\n            path: '/activity/' + to.params.id\n          })\n        }\n      })\n    }\n    next()\n  }\n})())\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  components: {App},\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}