webpackJsonp([5],{CYqB:function(t,i){},Hl5Y:function(t,i){},cqKU:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"activity-bar",on:{click:function(i){t.$emit("click")}}},[e("div",{staticClass:"image"},[e("img",{attrs:{src:t.$global.apis.imageSrc(t.data.image)},on:{load:function(t){t.target.nextSibling.style.opacity="1"}}}),e("div",{style:{backgroundImage:"url("+t.$global.apis.imageSrc(t.data.image)+")"}})]),t._v(" "),0===t.data.type?e("div",{staticClass:"tag vol"}):1===t.data.type?e("div",{staticClass:"tag awd"}):t._e(),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[t._v(t._s(t.data.title))]),t._v(" "),e("div",{staticClass:"info time"},[0===t.data.type?e("div",[t._v("\n        "+t._s(t.data.action_time.slice(0,-3))+"\n      ")]):1===t.data.type?e("div",[t._v("\n        "+t._s(t.data.book_time.slice(0,-3))+"\n      ")]):t._e()]),t._v(" "),e("div",{staticClass:"info member"},[0===t.data.type?e("div",[t._v("\n        "+t._s(t.data.current_member)+"/"+t._s(t.data.member)+"\n      ")]):1===t.data.type?e("div",[t._v("\n        "+t._s(t.data.current_member)+"/"+t._s(t.data.award)+"\n      ")]):t._e()])])])},staticRenderFns:[]};var a={name:"ActivityHome",props:["meta"],components:{"activity-bar":e("VU/8")({name:"ActivityBar",props:["data"]},n,!1,function(t){e("CYqB")},"data-v-7b7fe1f5",null).exports,loading:e("NxGh").a},beforeRouteLeave:function(t,i,e){"Login"!==t.name?(this.$emit("con-fade-out"),setTimeout(function(){e()},100)):e()},created:function(){var t=this;this.getActivity(!1),setTimeout(function(){t.usedMeta.queryTypes=["所有","未参与","我参与"],t.usedMeta.value=t.currentQueryType,t.usedMeta.back=t.signOut,t.usedMeta.flush=t.flushActivity,t.$route.meta.isManager&&t.usedMeta.queryTypes.push("我发起")},100),setTimeout(function(){t.$emit("nav-fade-in")},200)},data:function(){return{usedMeta:this.meta,currentQueryType:this.getCookieQueryType(),currentStartId:0,isQueryEnd:!0,activities:[],loading:!0}},methods:{getCookieQueryType:function(){var t=Number(this.$global.getCookie("query_type"));return isNaN(t)||t%1!=0||t<0||t>3?0:this.$route.meta.isManager||3!==t?t:0},signOut:function(){if(confirm("确定退出？")){var t=this;t.$global.removeCookie("query_type"),t.$http.post(t.$global.apis.signout()).then(function(i){(i=i.body)instanceof Object?i.err_code?alert(i.err_msg):(t.$route.meta.logined=!1,t.$route.meta.studentId="",t.$route.meta.name="",t.$route.meta.isManager=!1,t.$root.$router.replace("/login")):alert("服务器发生错误")}).catch(function(i){alert("404！该服务暂时不可用"),t.saving=!1})}},getActivity:function(t,i){var e=this;e.loading=!0,t&&(document.cookie="query_type="+i,e.currentQueryType=i,e.currentStartId=0),e.$http.post(e.$global.apis.queryA(),{type:e.currentQueryType,start_id:e.currentStartId,number:e.$global.flushActivityNumber}).then(function(n){(n=n.body)instanceof Object?n.err_code?alert(n.err_msg):(n=n.data,t&&(e.currentQueryType=i,e.activities=[],e.currentStartId=0,e.isQueryEnd=!0),n.activities.length>0&&(e.activities=e.activities.concat(n.activities),e.currentStartId=n.activities.slice(-1)[0].id-1),e.isQueryEnd=n.is_end,setTimeout(function(){e.$emit("con-fade-in")},100)):alert("服务器发生错误"),e.loading=!1}).catch(function(t){alert("404！该服务暂时不可用"),e.saving=!1})},flushActivity:function(t){this.getActivity(!0,t)},toDetails:function(t){this.$root.$router.push("/activity/"+t)}}},c={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{attrs:{id:"activity-home"}},[n("div",{attrs:{id:"activities"}},[t.$route.meta.isManager&&3===t.currentQueryType?n("div",{staticClass:"activity-bar",on:{click:function(i){t.$root.$router.push("/activity/publish")}}},[n("img",{attrs:{id:"add-icon",src:e("nmQC")}}),t._v(" "),t._m(0)]):t._e(),t._v(" "),t._l(t.activities,function(i){return n("activity-bar",{key:"activity"+i.id,staticClass:"activity-bar",attrs:{data:i},on:{click:function(e){t.toDetails(i.id)}}})}),t._v(" "),t.isQueryEnd?t._e():n("div",{attrs:{id:"get-activity"},on:{click:function(i){t.getActivity(!1)}}},[t.loading?n("div",{staticClass:"loading-box"},[n("loading",{attrs:{number:"3"}})],1):n("div",{staticClass:"get-activity-box"},[n("div",{staticClass:"get-activity-text"},[t._v("加载更多")]),n("div",{staticClass:"get-activity-img"})])])],2),t._v(" "),0===t.activities.length?n("div",{staticClass:"center-tips"},[2===t.currentQueryType?n("div",[t._v("\n      你还没有参加任何活动哦\n    ")]):3===t.currentQueryType?n("div",[t._v("\n      空空如也"),n("br"),n("span",[t._v("╰(￣▽￣)╮")]),t._v("快发起活动吧\n    ")]):n("div",[t._v("\n      暂时还没有活动哦"),n("br"),t._v("请耐心等待~\n    ")])]):t._e(),t._v(" "),n("div",{staticClass:"t-zai"})])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"add-text-box"}},[i("div",{attrs:{id:"add-text"}},[this._v("添加活动")])])}]};var r=e("VU/8")(a,c,!1,function(t){e("Hl5Y")},"data-v-0d38d567",null);i.default=r.exports},nmQC:function(t,i){t.exports="data:image/png;base64,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"}});
//# sourceMappingURL=5.aad303ee6471fbe96bc3.js.map