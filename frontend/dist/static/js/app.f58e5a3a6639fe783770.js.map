{"version":3,"sources":["webpack:///./src/router/index.js","webpack:///./src/global.js","webpack:///src/App.vue","webpack:///./src/App.vue?aaa8","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/console.log.js"],"names":["Vue","use","Router","Meta","logined","studengId","name","isManager","loginToRedirect","loginRedirectPath","router","routes","path","component","__webpack_require__","e","then","bind","meta","Promise","all","children","redirect","global","flushActivityNumber","limits","titleMax","detailsMax","departmentList","urls","emailRedirect","apis","front","add","str","this","init","login","signout","publishV","publishA","image","id","queryA","queryD","queryU","download","register","unregister","editV","editA","delete","imageSrc","shortSrc","getCookie","pattern","RegExp","document","cookie","replace","removeCookie","now","Date","setTime","getTime","toUTCString","compareDatetime","datetime","comparison","slice","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","i","Number","datetimeToInput","inputToDatetime","input","App","data","appWidth","undefined","loading","created","flushSize","window","addEventListener","methods","width","body","clientWidth","selectortype_template_index_0_src_App","render","_vm","_h","$createElement","_c","_self","attrs","_v","staticClass","class","show","style","fontSize","on","main-fade-in","$event","main-fade-out","staticRenderFns","isChecked","src_App","normalizeComponent","ssrContext","VueResource","config","productionTip","prototype","$global","Global","beforeEach","to","from","next","http","post","Object","promise_default","a","reject","err_code","err_msg","studentId","student_id","fullPath","search","type","start_id","params","number","activities","Array","length","activity","timeAccess","action_time","book_time","is_publisher","catch","alert","el","components","template","msg","console","log"],"mappings":"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","file":"static/js/app.f58e5a3a6639fe783770.js","sourcesContent":["import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nconst Login = () => import('@/components/Login')\r\nconst Activity = () => import('@/components/Activity')\r\nconst ActivityHome = () => import('@/components/ActivityHome')\r\nconst ActivityDetails = () => import('@/components/ActivityDetails')\r\nconst ActivityCreator = () => import('@/components/ActivityCreator')\r\nconst ActivityEditor = () => import('@/components/ActivityEditor')\r\n\r\nVue.use(Router)\r\n\r\nconst Meta = {\r\n  logined: false,\r\n  studengId: '',\r\n  name: '',\r\n  isManager: false,\r\n  loginToRedirect: false,\r\n  loginRedirectPath: ''\r\n}\r\n\r\nexport default new Router({\r\n  routes: [\r\n    {\r\n      path: '/login',\r\n      name: 'Login',\r\n      component: Login,\r\n      meta: Meta\r\n    },\r\n    {\r\n      path: '/activity',\r\n      component: Activity,\r\n      children: [\r\n        {\r\n          path: '',\r\n          name: 'ActivityHome',\r\n          component: ActivityHome,\r\n          meta: Meta\r\n        },\r\n        {\r\n          path: 'publish',\r\n          name: 'ActivityCreator',\r\n          component: ActivityCreator,\r\n          meta: Meta\r\n        },\r\n        {\r\n          path: ':id/edit',\r\n          name: 'ActivityEditor',\r\n          component: ActivityEditor,\r\n          meta: Meta\r\n        },\r\n        {\r\n          path: ':id',\r\n          name: 'ActivityDetails',\r\n          component: ActivityDetails,\r\n          meta: Meta\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      path: '*',\r\n      redirect: '/login'\r\n    }\r\n  ]\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","export default {\r\n  flushActivityNumber: 6,\r\n  limits: {\r\n    titleMax: 25,\r\n    detailsMax: 100\r\n  },\r\n  departmentList: [\r\n    '编辑部',\r\n    '综合管理部',\r\n    '综合新闻部',\r\n    '外联部',\r\n    '策划推广部',\r\n    '节目部',\r\n    '人力资源部',\r\n    '技术部',\r\n    '视频部',\r\n    '视觉设计部'\r\n  ],\r\n  urls: {\r\n    emailRedirect: 'https://hemc.100steps.net/2013/bbter/users'\r\n  },\r\n  apis: {\r\n    front: '/root/back/public',\r\n    // front: 'public',\r\n    add (str) { return this.front + str },\r\n    init () { return this.add('/api/init') },\r\n    login () { return this.add('/api/login') },\r\n    signout () { return this.add('/api/signout') },\r\n    publishV () { return this.add('/api/manager/publish/volunteer') },\r\n    publishA () { return this.add('/api/manager/publish/award') },\r\n    image (id) { return this.add('/api/publisher/modify/image/' + id) },\r\n    queryA () { return this.add('/api/user/query/activity') },\r\n    queryD (id) { return this.add('/api/manager/query/' + id + '/department') },\r\n    queryU (id) { return this.add('/api/manager/query/' + id + '/userinfo') },\r\n    download (id) { return this.add('/api/manager/download/' + id) },\r\n    register (id) { return this.add('/api/user/register/' + id) },\r\n    unregister (id) { return this.add('/api/user/unregister/' + id) },\r\n    editV (id) { return this.add('/api/publisher/modify/volunteer/' + id) },\r\n    editA (id) { return this.add('/api/publisher/modify/award/' + id) },\r\n    delete (id) { return this.add('/api/publisher/delete/' + id) },\r\n    imageSrc (shortSrc) { return this.add(shortSrc) }\r\n  },\r\n  getCookie (str) {\r\n    var pattern = new RegExp('(?:(?:^|.*;\\\\s*)' + str + '\\\\s*=\\\\s*([^;]*).*$)|^.*$')\r\n    return document.cookie.replace(pattern, '$1')\r\n  },\r\n  removeCookie (str) {\r\n    var now = new Date()\r\n    now.setTime(now.getTime() - 1)\r\n    document.cookie = str + '=;expires=' + now.toUTCString()\r\n  },\r\n  compareDatetime (datetime) {\r\n    var now = new Date()\r\n    var comparison = [\r\n      [datetime.slice(0, 4), now.getFullYear()],\r\n      [datetime.slice(5, 7), now.getMonth() + 1],\r\n      [datetime.slice(8, 10), now.getDate()],\r\n      [datetime.slice(11, 13), now.getHours()],\r\n      [datetime.slice(14, 16), now.getMinutes()],\r\n      [datetime.slice(17, 19), now.getSeconds()]\r\n    ]\r\n    for (let i = 0; i < 6; i++) {\r\n      comparison[i][0] = Number(comparison[i][0])\r\n      if (comparison[i][0] !== comparison[i][1]) {\r\n        return comparison[i][0] - comparison[i][1]\r\n      }\r\n    }\r\n    return 0\r\n  },\r\n  datetimeToInput (datetime) {\r\n    return datetime.slice(0, 10) + 'T' + datetime.slice(11, 16)\r\n    // return datetime.replace(/^(\\d{4}-\\d{2}-\\d{2}) (\\d{2}:\\d{2}):\\d{2}$/, '$1T$2')\r\n  },\r\n  inputToDatetime (input) {\r\n    return input.slice(0, 10) + ' ' + input.slice(11, 16) + ':00'\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/global.js","<template>\n  <div id=\"app\">\n    <div id=\"global-bg\"></div>\n    <router-view\n      class=\"main\"\n      v-bind:style=\"{fontSize: appWidth + 'px'}\"\n      v-bind:class=\"{'show': !loading}\"\n      v-on:main-fade-in=\"loading = false\"\n      v-on:main-fade-out=\"loading = true\"\n    />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App',\n  data () {\n    return {\n      appWidth: undefined,\n      loading: true\n    }\n  },\n  created () {\n    this.flushSize()\n    window.addEventListener('resize', this.flushSize)\n  },\n  methods: {\n    flushSize () {\n      var width = document.body.clientWidth\n      if (width < 300) {\n        width = 300\n      } else if (width > 450) {\n        width = 450\n      }\n      this.appWidth = width / 1080 * 100\n    }\n  }\n}\n</script>\n\n<style>\n* {\n  margin: 0;\n  padding: 0;\n  font-family: '微软雅黑';\n}\nhtml {\n  width: 100%;\n  height: 100%;\n}\nbody {\n  width: 100%;\n  height: 100%;\n}\ninput {\n  border: none;\n  outline: none;\n  -webkit-appearance: none;\n}\n#app {\n  position: relative;\n  margin: auto;\n  width: 500px;\n  height: 100%;\n}\n@media screen and (max-width: 500px) {\n  #app {\n    width: 100%;\n  }\n}\n#global-bg {\n  z-index: -1;\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background: linear-gradient(145deg, #a1dd93, #16a086);\n}\n</style>\n<style scoped>\n.main {\n  opacity: 0;\n  transition: opacity 0.1s;\n}\n.main.show {\n  opacity: 1;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{attrs:{\"id\":\"global-bg\"}}),_vm._v(\" \"),_c('router-view',{staticClass:\"main\",class:{'show': !_vm.loading},style:({fontSize: _vm.appWidth + 'px'}),on:{\"main-fade-in\":function($event){_vm.loading = false},\"main-fade-out\":function($event){_vm.loading = true}}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4dcceabe\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4dcceabe\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4dcceabe\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=1!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4dcceabe\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4dcceabe\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport './console.log'\r\nimport Vue from 'vue'\r\nimport router from './router'\r\nimport VueResource from 'vue-resource'\r\nimport Global from './global'\r\n\r\nimport App from './App'\r\n\r\nVue.use(VueResource)\r\nVue.config.productionTip = false\r\nVue.prototype.$global = Global\r\n\r\nrouter.beforeEach((() => {\r\n  var isChecked = false\r\n  return (to, from, next) => {\r\n    if (!isChecked) {\r\n      isChecked = true\r\n      Vue.http.post(Global.apis.init()).then(data => {\r\n        data = data.body\r\n        if (!(data instanceof Object)) {\r\n          return Promise.reject('服务器发生错误')\r\n        } else if (data.err_code) {\r\n          return Promise.reject(data.err_msg)\r\n        } else {\r\n          data = data.data\r\n          if (data.logined) {\r\n            to.meta.logined = true\r\n            to.meta.studentId = data.student_id\r\n            to.meta.name = data.name\r\n            to.meta.isManager = true\r\n            // to.meta.isManager = data.is_manager\r\n          }\r\n        }\r\n        if (to.fullPath === '/login') {\r\n          if (to.meta.logined) {\r\n            next({\r\n              path: '/activity',\r\n              replace: true\r\n            })\r\n          }\r\n        } else {\r\n          if (!to.meta.logined) {\r\n            to.meta.loginToRedirect = true\r\n            to.meta.loginRedirectPath = to.fullPath\r\n            next({\r\n              path: '/login',\r\n              replace: true\r\n            })\r\n          } else if (to.fullPath.search(/^\\/activity\\/\\d+\\/edit$/) !== -1) {\r\n            return Vue.http.post(Global.apis.queryA(), {\r\n              type: 0,\r\n              start_id: to.params.id,\r\n              number: 1\r\n            })\r\n          }\r\n        }\r\n        return Promise.reject(0)\r\n      }).then(data => {\r\n        data = data.body\r\n        if (!(data instanceof Object)) {\r\n          return Promise.reject('服务器发生错误')\r\n        } else if (data.err_code) {\r\n          return Promise.reject(data.err_msg)\r\n        } else {\r\n          data = data.data\r\n          if (data.activities instanceof Array &&\r\n            data.activities.length === 1 &&\r\n            data.activities[0].id === Number(to.params.id)) {\r\n            let activity = data.activities[0]\r\n            let timeAccess = false\r\n            if (activity.type === 0) {\r\n              timeAccess = Global.compareDatetime(activity.action_time) > 0\r\n            } else if (activity.type === 1) {\r\n              timeAccess = Global.compareDatetime(activity.book_time) > 0\r\n            }\r\n            if (!(timeAccess && activity.is_publisher)) {\r\n              return Promise.reject('你没有修改权限')\r\n            }\r\n          } else {\r\n            return Promise.reject('活动不存在')\r\n          }\r\n        }\r\n      }).catch(data => {\r\n        if (data === 0) {\r\n        } else if (typeof data === 'string') {\r\n          alert(data)\r\n        } else {\r\n          alert('服务器发生错误')\r\n          next({\r\n            path: '/activity/' + to.params.id,\r\n            replace: true\r\n          })\r\n        }\r\n        next()\r\n      })\r\n    } else {\r\n      next()\r\n    }\r\n  }\r\n})())\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  components: {App},\r\n  template: '<App/>'\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","var msg = ''\r\nmsg += '________   ________   __________               \\n'\r\nmsg += '|\\\\   __  \\\\ |\\\\   __  \\\\ |\\\\__    __\\\\        \\n'\r\nmsg += '\\\\ \\\\  \\\\|\\\\ /_\\\\ \\\\  \\\\|\\\\ /_\\\\|__|\\\\  \\\\_|   \\n'\r\nmsg += ' \\\\ \\\\   __  \\\\\\\\ \\\\   __  \\\\   \\\\ \\\\  \\\\      \\n'\r\nmsg += '  \\\\ \\\\  \\\\|\\\\  \\\\\\\\ \\\\  \\\\|\\\\  \\\\   \\\\ \\\\  \\\\ \\n'\r\nmsg += '   \\\\ \\\\_______\\\\\\\\ \\\\_______\\\\   \\\\ \\\\__\\\\    \\n'\r\nmsg += '    \\\\|_______| \\\\|_______|    \\\\|__|  百步梯活动报名系统 2018.9 \\n'\r\nmsg += '________________________________________________________________\\n'\r\nmsg += '  Powered by 百步梯技术部  设计：陈泳文 前端：张梓健 后台：林子健. \\n'\r\nconsole.log('%c' + msg, 'color: LightGreen')\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/console.log.js"],"sourceRoot":""}