{"version":3,"sources":["webpack:///src/components/ActivityDetailsMain.vue","webpack:///./src/components/ActivityDetailsMain.vue?3749","webpack:///./src/components/ActivityDetailsMain.vue","webpack:///src/components/ActivityDetailsDep.vue","webpack:///./src/components/ActivityDetailsDep.vue?e449","webpack:///./src/components/ActivityDetailsDep.vue","webpack:///src/components/ActivityDetails.vue","webpack:///./src/components/ActivityDetails.vue?210f","webpack:///./src/components/ActivityDetails.vue","webpack:///./src/assets/img/arrow.png"],"names":["ActivityDetailsMain","name","props","data","registering","deleting","computed","imageUrl","this","image","$global","defaultImg","mounted","_this","setTimeout","$emit","methods","foo","target","console","log","register","vm","type","before","registered","$parent","simplePost","getDetails","delActivity","$root","$router","replace","editActivity","push","id","components_ActivityDetailsMain","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","style","src","on","load","$event","nextSibling","opacity","backgroundImage","_v","_s","title","details","action_time","current_member","member","book_time","award","_e","class","dis","click","staticRenderFns","src_components_ActivityDetailsMain","__webpack_require__","normalizeComponent","ssrContext","ActivityDetailsDep","components","loading","usedData","openedList","loadingList","userList","created","departmentList","forEach","_this2","foldSwitch","dep","_this3","$set","getUserInfo","$http","post","department","then","body","Object","err_code","promise_default","a","reject","err_msg","users","catch","String","alert","getFile","components_ActivityDetailsDep","_l","current","index","key","member_list","opened","number","user","userIndex","student_id","tele","ActivityDetails","details-main","details-dep","ActivityDetailsDep_normalizeComponent","usedMeta","meta","currentQueryType","isActivityExist","timeBefore","depData","inited","watch","$route.params.id","beforeRouteLeave","to","from","next","beforeCreate","logined","queryTypes","value","back","flush","query","isManager","ActivityExist","fn","start_id","$route","params","activities","Array","length","Number","compareDatetime","undefined","route","components_ActivityDetails","con-fade-in","con-fade-out","ActivityDetails_Component","ActivityDetails_normalizeComponent","__webpack_exports__","module","exports"],"mappings":"qJAqFAA,GACAC,KAAA,cACAC,OAAA,iBACAC,KAHA,WAIA,OACAC,aAAA,EACAC,UAAA,IAGAC,UACAC,SADA,WAEA,WAAAC,KAAAL,KAAAM,MAAAD,KAAAE,QAAAC,WAAAH,KAAAL,KAAAM,QAGAG,QAdA,WAcA,IAAAC,EAAAL,KACAM,WAAA,WACAD,EAAAE,MAAA,gBACA,MAEAC,SACAC,IADA,SACAC,GACAC,QAAAC,IAAAF,IAEAG,SAJA,WAKA,IAAAC,EAAAd,KACA,IAAAc,EAAAnB,KAAAoB,OAAAD,EAAAE,QACA,IAAAF,EAAAnB,KAAAoB,MAAAD,EAAAE,SAGAF,EAAAlB,aAAA,EACAkB,EAAAnB,KAAAsB,WACAH,EAAAI,QAAAC,WAAA,mCACAL,EAAAI,QAAAE,WAAA,WACAN,EAAAlB,aAAA,MAIAkB,EAAAI,QAAAC,WAAA,iCACAL,EAAAI,QAAAE,WAAA,WACAN,EAAAlB,aAAA,QAKAyB,YAzBA,WA0BA,IAAAP,EAAAd,KACAc,EAAAjB,UAAA,EACAiB,EAAAI,QAAAC,WAAA,oCACAL,EAAAQ,MAAAC,QAAAC,QAAA,gBAGAC,aAhCA,WAiCAzB,KAAAgB,QACAhB,KAAAsB,MAAAC,QAAAG,KAAA,aAAA1B,KAAAL,KAAAgC,GAAA,YCvIAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAA9B,KAAa+B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,OAAOR,GAAA,kBAAqBM,EAAA,OAAYG,YAAA,QAAAC,MAAAP,EAAA,WAAyCG,EAAA,OAAYE,OAAOG,IAAAR,EAAA/B,UAAmBwC,IAAKC,KAAA,SAAAC,GAAwBA,EAAA/B,OAAAgC,YAAAL,MAAAM,QAAA,QAAgDV,EAAA,OAAYI,OAAQO,gBAAA,OAAAd,EAAA/B,SAAA,SAA+C+B,EAAAe,GAAA,KAAAZ,EAAA,OAA0BG,YAAA,YAAsBH,EAAA,OAAYG,YAAA,UAAoBN,EAAAe,GAAAf,EAAAgB,GAAAhB,EAAAnC,KAAAoD,UAAAjB,EAAAe,GAAA,SAAAf,EAAAnC,KAAAoB,KAAAkB,EAAA,OAA+EG,YAAA,YAAsBH,EAAA,OAAAH,EAAAe,GAAA,cAAAf,EAAAe,GAAA,KAAAZ,EAAA,OAAAH,EAAAe,GAAA,MAAAf,EAAAgB,GAAAhB,EAAAnC,KAAAqD,YAAAlB,EAAAe,GAAA,KAAAZ,EAAA,OAAAH,EAAAe,GAAA,UAAAf,EAAAgB,GAAAhB,EAAAnC,KAAAsD,gBAAAnB,EAAAe,GAAA,KAAAZ,EAAA,OAAAH,EAAAe,GAAA,SAAAf,EAAAgB,GAAAhB,EAAAnC,KAAAuD,gBAAA,IAAApB,EAAAgB,GAAAhB,EAAAnC,KAAAwD,WAAArB,EAAAe,GAAA,KAAAZ,EAAA,OAAAH,EAAAe,GAAA,OAAAf,EAAAnC,KAAA,WAAAsC,EAAA,QAAAH,EAAAe,GAAA,SAAAf,EAAAd,OAAAc,EAAAnC,KAAAwD,SAAArB,EAAAnC,KAAAuD,eAAAjB,EAAA,QAAAH,EAAAe,GAAA,YAAAZ,EAAA,QAAAH,EAAAe,GAAA,SAAAZ,EAAA,QAAAH,EAAAe,GAAA,wBAAAf,EAAAnC,KAAAoB,KAAAkB,EAAA,OAA4hBG,YAAA,YAAsBH,EAAA,OAAAH,EAAAe,GAAA,aAAAf,EAAAe,GAAA,KAAAZ,EAAA,OAAAH,EAAAe,GAAA,MAAAf,EAAAgB,GAAAhB,EAAAnC,KAAAqD,YAAAlB,EAAAe,GAAA,KAAAZ,EAAA,OAAAH,EAAAe,GAAA,QAAAf,EAAAgB,GAAAhB,EAAAnC,KAAAyD,cAAAtB,EAAAe,GAAA,KAAAZ,EAAA,OAAAH,EAAAe,GAAA,SAAAf,EAAAgB,GAAAhB,EAAAnC,KAAAuD,gBAAA,IAAApB,EAAAgB,GAAAhB,EAAAnC,KAAA0D,UAAAvB,EAAAe,GAAA,KAAAZ,EAAA,OAAAH,EAAAe,GAAA,OAAAf,EAAAnC,KAAA,WAAAsC,EAAA,QAAAH,EAAAe,GAAA,SAAAf,EAAA,OAAAG,EAAA,QAAAH,EAAAe,GAAA,YAAAf,EAAAnC,KAAA0D,QAAAvB,EAAAnC,KAAAuD,eAAAjB,EAAA,QAAAH,EAAAe,GAAA,YAAAf,EAAAnC,KAAA,mBAAAsC,EAAA,QAAAH,EAAAe,GAAA,gBAAAZ,EAAA,QAAAH,EAAAe,GAAA,aAAAf,EAAAwB,KAAAxB,EAAAe,GAAA,KAAAZ,EAAA,OAA+kBG,YAAA,YAAsB,IAAAN,EAAAnC,KAAAoB,KAAAkB,EAAA,OAAkCG,YAAA,SAAAmB,OAA4BC,KAAA1B,EAAAd,QAAAc,EAAAlC,aAAsC2C,IAAKkB,MAAA,SAAAhB,IAAyBX,EAAAd,QAAAc,EAAAlC,aAAAkC,EAAAjB,eAAmDiB,EAAAnC,KAAAsB,WAA0DgB,EAAA,OAA2BG,YAAA,iBAA2BN,EAAAe,GAAA,UAAhHZ,EAAA,OAAmCG,YAAA,aAAuBN,EAAAe,GAAA,UAAsD,IAAAf,EAAAnC,KAAAoB,KAAAkB,EAAA,OAAqDG,YAAA,SAAAmB,OAA4BC,IAAA1B,EAAAd,QAAAc,EAAAlC,aAAqC2C,IAAKkB,MAAA,SAAAhB,GAAyBX,EAAAd,QAAAc,EAAAlC,aAAAkC,EAAAjB,eAAkDiB,EAAAnC,KAAAsB,WAA0DgB,EAAA,OAA2BG,YAAA,iBAA2BN,EAAAe,GAAA,UAAhHZ,EAAA,OAAmCG,YAAA,aAAuBN,EAAAe,GAAA,UAAsDf,EAAAwB,OAAAxB,EAAAe,GAAA,KAAAf,EAAAnC,KAAA,aAAAsC,EAAA,OAA8EG,YAAA,YAAsBH,EAAA,OAAYG,YAAA,SAAAmB,OAA4BC,KAAA1B,EAAAd,QAAmBuB,IAAKkB,MAAA,SAAAhB,IAAyBX,EAAAd,QAAAc,EAAAL,mBAAoCQ,EAAA,OAAYG,YAAA,cAAwBN,EAAAe,GAAA,UAAAf,EAAAe,GAAA,KAAAZ,EAAA,OAAyCG,YAAA,SAAAmB,OAA4BC,IAAA1B,EAAAjC,UAAoB0C,IAAKkB,MAAA,SAAAhB,GAAyBX,EAAAjC,UAAAiC,EAAAT,kBAAoCY,EAAA,OAAYG,YAAA,aAAuBN,EAAAe,GAAA,YAAAf,EAAAwB,UAE1sFI,oBCCjB,IAuBAC,EAvBAC,EAAA,OAcAC,CACArE,EACAoC,GATA,EAVA,SAAAkC,GACAF,EAAA,SAaA,kBAEA,MAUA,QCyBAG,GACAtE,KAAA,aACAC,OAAA,QACAsE,YAAAC,kBAAA,GACAtE,KAJA,WAKA,OACAuE,SAAAlE,KAAAL,KACAsE,SAAA,EACAE,cACAC,eACAC,cAGAC,QAbA,WAaA,IAAAjE,EAAAL,KACAA,KAAAE,QAAAqE,eAAAC,QAAA,WACAnE,EAAA8D,WAAAzC,MAAA,GACArB,EAAAgE,SAAA3C,SACArB,EAAA+D,YAAA1C,MAAA,MAGAtB,QApBA,WAoBA,IAAAqE,EAAAzE,KACAM,WAAA,WACAmE,EAAAlE,MAAA,gBACA,MAEAC,SACAkE,WADA,SACAC,GAAA,IAAAC,EAAA5E,KACAA,KAAAmE,WAAAQ,GACA3E,KAAA6E,KAAA7E,KAAAmE,WAAAQ,GAAA,IAEA3E,KAAA6E,KAAA7E,KAAAoE,YAAAO,GAAA,GACA3E,KAAA6E,KAAA7E,KAAAmE,WAAAQ,GAAA,GACArE,WAAA,WACAsE,EAAAE,YAAAH,IACA,OAGAG,YAZA,SAYAH,GACA,IAAA7D,EAAAd,KACAc,EAAAiE,MAAAC,KAAA,gCACAC,WAAAN,IACAO,KAAA,SAAAvF,GAEA,OADAA,IAAAwF,gBACAC,OAEAzF,EAAA0F,SACAC,EAAAC,EAAAC,OAAA7F,EAAA8F,UAEA3E,EAAA+D,KAAA/D,EAAAuD,SAAAM,EAAAhF,OAAA+F,YACA5E,EAAA+D,KAAA/D,EAAAsD,YAAAO,GAAA,IALAW,EAAAC,EAAAC,OAAA,aAOAG,MAAA,SAAAhG,GACAgB,QAAAC,IAAAjB,GACAA,aAAAiG,OACAC,MAAAlG,GAEAkG,MAAA,gBAEA/E,EAAA+D,KAAA/D,EAAAqD,WAAAQ,GAAA,GACA7D,EAAA+D,KAAA/D,EAAAsD,YAAAO,GAAA,MAGAmB,QArCA,WAsCA9F,KACAkB,QAAAC,WAAA,6BChHA4E,GADiBlE,OAFjB,WAA0B,IAAAC,EAAA9B,KAAa+B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BG,YAAA,YAAsBH,EAAA,OAAYG,YAAA,gBAAAG,IAAgCkB,MAAA3B,EAAAgE,WAAqB7D,EAAA,OAAAH,EAAAe,GAAA,gBAAAf,EAAAe,GAAA,KAAAf,EAAAkE,GAAAlE,EAAAnC,KAAA,6BAAAsG,EAAAC,GAA6G,OAAAjE,EAAA,OAAiBkE,IAAA,MAAAD,EAAA9D,YAAA,aAAyCH,EAAA,OAAYG,YAAA,QAAkB,IAAAN,EAAAnC,KAAAoB,KAAAkB,EAAA,OAAkCG,YAAA,SAAmBN,EAAAe,GAAAf,EAAAgB,GAAAhB,EAAA5B,QAAAqE,eAAA2B,IAAA,IAAApE,EAAAgB,GAAAmD,MAAA,IAAAnE,EAAAnC,KAAAoB,KAAAkB,EAAA,OAA0GG,YAAA,SAAmBN,EAAAe,GAAAf,EAAAgB,GAAAhB,EAAA5B,QAAAqE,eAAA2B,IAAA,IAAApE,EAAAgB,GAAAmD,GAAA,IAAAnE,EAAAgB,GAAAhB,EAAAnC,KAAAyG,YAAAF,OAAApE,EAAAwB,KAAA,IAAA2C,EAAAhE,EAAA,OAAqJG,YAAA,aAAAG,IAA6BkB,MAAA,SAAAhB,GAAyBX,EAAA4C,WAAAwB,OAAwBjE,EAAA,OAAYsB,OAAO8C,OAAAvE,EAAAqC,WAAA+B,IAAgC/D,OAAQG,IAAAsB,EAAA,aAAyC9B,EAAAwB,OAAAxB,EAAAe,GAAA,KAAAf,EAAAqC,WAAA+B,GAAAjE,EAAA,OAAAH,EAAAsC,YAAA8B,GAA8bjE,EAAA,OAAAA,EAAA,OAAuBG,YAAA,iBAA2BH,EAAA,OAAYG,YAAA,gBAA0BH,EAAA,WAAgBE,OAAOmE,OAAA,QAAc,OAA3jBrE,EAAA,MAAAH,EAAAkE,GAAAlE,EAAAuC,SAAA6B,GAAA,SAAAK,EAAAC,GAAsJ,OAAAvE,EAAA,OAAiBkE,IAAAD,EAAA,OAAAM,EAAApE,YAAA,SAAkDH,EAAA,OAAYG,YAAA,SAAmBN,EAAAe,GAAA,MAAAf,EAAAgB,GAAAyD,EAAA9G,SAAAqC,EAAAe,GAAA,KAAAZ,EAAA,OAA0DG,YAAA,SAAmBN,EAAAe,GAAA,MAAAf,EAAAgB,GAAAyD,EAAAE,eAAA3E,EAAAe,GAAA,KAAAZ,EAAA,OAAgEG,YAAA,SAAmBN,EAAAe,GAAA,MAAAf,EAAAgB,GAAAyD,EAAAG,gBAAmK5E,EAAAwB,UAAuB,MAE18CI,oBCCjB,ICqBAiD,GACAlH,KAAA,kBACAuE,YACA4C,eAAAjD,EACAkD,cDzBAjD,EAAA,OAcAkD,CACA/C,EACAgC,GATA,EAVA,SAAAjC,GACAF,EAAA,SAaA,kBAEA,MAUA,SCIAlE,OAAA,QACAC,KAPA,WAQA,OACAoH,SAAA/G,KAAAgH,KACAC,iBAAA,EACAC,iBAAA,EACAC,YAAA,EACAxH,QACAyH,WACAC,QAAA,IAGAC,OACAC,mBADA,WAEAvH,KAAAO,MAAA,gBACAP,KAAAoB,eAGAoG,iBAxBA,SAwBAC,EAAAC,EAAAC,GACA3H,KAAAO,MAAA,gBACAD,WAAA,WACAqH,KACA,MAEAC,aA9BA,WA+BA5H,KAAAE,QAAA2H,SACA7H,KAAAsB,MAAAC,QAAAC,QAAA,WAGA8C,QAnCA,WAmCA,IAAAjE,EAAAL,KACAA,KAAAE,QAAA2H,UACA7H,KAAAoB,aACAd,WAAA,WACAD,EAAA0G,SAAAe,YAAA,QACAzH,EAAA0G,SAAAgB,MAAA,EACA1H,EAAA0G,SAAAiB,KAAA3H,EAAA2H,KACA3H,EAAA0G,SAAAkB,MAAA5H,EAAA6H,MACA7H,EAAAH,QAAAiI,WACA9H,EAAA0G,SAAAe,WAAApG,KAAA,UAEA,KACApB,WAAA,WACAD,EAAAE,MAAA,gBACA,OAGAC,SACAwH,KADA,WAEAhI,KAAAsB,MAAAC,QAAAG,KAAA,cAEAwG,MAJA,SAIAnH,GAAA,IAAA0D,EAAAzE,KACAA,KAAAiH,iBAAAlG,EACAf,KAAAoI,eACA9H,WAAA,WACAmE,EAAAlE,MAAA,gBACA,MAGAa,WAZA,SAYAiH,GAAA,IAAAzD,EAAA5E,KACAc,EAAAd,KACAc,EAAAiE,MAAAC,KAAA,yBACAjE,KAAA,EACAuH,SAAAxH,EAAAyH,OAAAC,OAAA7G,GACA2E,OAAA,IACApB,KAAA,SAAAvF,GAEA,MADAA,IAAAwF,gBACAC,QACA,OAAAE,EAAAC,EAAAC,OAAA,WACA,GAAA7F,EAAA0F,SACA,OAAAC,EAAAC,EAAAC,OAAA7F,EAAA8F,SAMA,GAJA9F,SACAmB,EAAAoG,gBAAAvH,EAAA8I,sBAAAC,OACA,IAAA/I,EAAA8I,WAAAE,QACAhJ,EAAA8I,WAAA,GAAA9G,KAAAiH,OAAA9H,EAAAyH,OAAAC,OAAA7G,IACAb,EAAAoG,iBAOA,GANApG,EAAAnB,OAAA8I,WAAA,GACA,IAAA3H,EAAAnB,KAAAoB,KACAD,EAAAqG,WAAArG,EAAAZ,QAAA2I,gBAAA/H,EAAAnB,KAAAsD,aAAA,EACA,IAAAnC,EAAAnB,KAAAoB,OACAD,EAAAqG,WAAArG,EAAAZ,QAAA2I,gBAAA/H,EAAAnB,KAAAyD,WAAA,GAEAwB,EAAA1E,QAAAiI,UACA,OAAArH,EAAAiE,MAAAC,KAAA,uBACArD,GAAAb,EAAAyH,OAAAC,OAAA7G,UAIAb,EAAAnB,QAGA,OAAA2F,EAAAC,EAAAC,OAAA,KACAN,KAAA,SAAAvF,GAEA,OADAA,IAAAwF,gBACAC,OAEAzF,EAAA0F,SACAC,EAAAC,EAAAC,OAAA7F,EAAA8F,UAEA3E,EAAAsG,QAAAzH,OACAmB,EAAA+D,KAAA/D,EAAAsG,QAAA,OAAAtG,EAAAnB,KAAAoB,MAEAuE,EAAAC,EAAAC,OAAA,IAPAF,EAAAC,EAAAC,OAAA,aAQAG,MAAA,SAAAhG,QACAmJ,IAAAT,GACAA,IAEA,IAAA1I,GACAW,WAAA,WACAsE,EAAArE,MAAA,gBACA,KACAqE,EAAAyC,QAAA,GACA1H,aAAAiG,OACAC,MAAAlG,GAEAkG,MAAA,mBAIA1E,WAzEA,SAyEA4H,EAAAV,GACArI,KACA+E,MAAAC,KAAA+D,EADA/I,KACAL,KAAAgC,IAAAuD,KAAA,SAAAvF,IACAA,IAAAwF,gBACAC,OAEAzF,EAAA0F,UACAQ,MAAAlG,EAAA8F,SAFAI,MAAA,gBAIAiD,IAAAT,GACAA,MAEA1C,MAAA,SAAAhG,GACAkG,MAAA,qBACAiD,IAAAT,GACAA,OAIAvC,QA5FA,WA6FA9F,KACAmB,WAAA,6BCvKA6H,GADiBnH,OAFjB,WAA0B,IAAAC,EAAA9B,KAAa+B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAH,EAAAoF,gBAA0E,IAAApF,EAAAmF,kBAAAnF,EAAAuF,OAAApF,EAAA,gBAAiGE,OAAOxC,KAAAmC,EAAAnC,KAAAqB,OAAAc,EAAAqF,YAAwC5E,IAAK0G,cAAA,SAAAxG,GAA+BX,EAAAvB,MAAA,gBAAyB2I,eAAA,SAAAzG,GAAiCX,EAAAvB,MAAA,oBAA4B,IAAAuB,EAAAmF,kBAAAnF,EAAAuF,OAAApF,EAAA,eAA+DE,OAAOxC,KAAAmC,EAAAsF,SAAmB7E,IAAK0G,cAAA,SAAAxG,GAA+BX,EAAAvB,MAAA,gBAAyB2I,eAAA,SAAAzG,GAAiCX,EAAAvB,MAAA,oBAA4BuB,EAAAwB,KAAviBrB,EAAA,OAAkDG,YAAA,cAAwBN,EAAAe,GAAA,2BAA6d,IAE/mBa,oBCCjB,IAcAyF,EAdAvF,EAAA,OAcAwF,CACAzC,EACAqC,GATA,EAVA,SAAAlF,GACAF,EAAA,SAaA,kBAEA,MAUAyF,EAAA,QAAAF,EAAA,iDC1BAG,EAAAC,QAAA","file":"static/js/3.9e1a5b0a1cb1a4526490.js","sourcesContent":["<template>\r\n  <div id=\"details-main\">\r\n    <div class=\"image\" v-bind:style=\"imageUrl\">\r\n      <img\r\n        v-bind:src=\"imageUrl\"\r\n        v-on:load=\"$event.target.nextSibling.style.opacity = '1'\"\r\n      /><div v-bind:style=\"{backgroundImage: 'url(' + imageUrl + ')'}\"></div>\r\n    </div>\r\n    <div class=\"content\">\r\n      <div class=\"title\">{{ data.title }}</div>\r\n      <div class=\"options\" v-if=\"data.type === 0\">\r\n        <div>类型：志愿者活动</div>\r\n        <div>详情：{{ data.details }}</div>\r\n        <div>志愿开始时间：{{ data.action_time }}</div>\r\n        <div>已报名人数：{{ data.current_member }}/{{ data.member }}</div>\r\n        <div>状态：<span\r\n            v-if=\"data.registered\"\r\n          >已报名</span><span\r\n            v-else-if=\"!before\"\r\n          >活动已开始，不予报名</span><span\r\n            v-else-if=\"data.member === data.current_member\"\r\n          >报名人数已满</span><span\r\n            v-else\r\n          >可报名</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"options\" v-else-if=\"data.type === 1\">\r\n        <div>类型：福利活动</div>\r\n        <div>详情：{{ data.details }}</div>\r\n        <div>领取时间：{{ data.book_time }}</div>\r\n        <div>已领取人数：{{ data.current_member }}/{{ data.award }}</div>\r\n        <div>状态：<span\r\n            v-if=\"data.registered\"\r\n          >已领奖</span><span\r\n            v-else-if=\"before\"\r\n          >领奖时间未到</span><span\r\n            v-else-if=\"data.award === data.current_member\"\r\n          >奖品已被领完</span><span\r\n            v-else-if=\"data.is_department_full\"\r\n          >所在部门领取人数已满</span><span\r\n            v-else\r\n          >可领取</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"buttons\">\r\n        <div\r\n          class=\"button\"\r\n          v-bind:class=\"{'dis': !before || registering}\"\r\n          v-if=\"data.type === 0\"\r\n          v-on:click=\"!before || registering || register()\"\r\n        >\r\n          <div class=\"text reg\" v-if=\"!data.registered\">报名</div>\r\n          <div class=\"text del sml\" v-else>取消报名</div>\r\n        </div>\r\n        <div\r\n          class=\"button\"\r\n          v-bind:class=\"{'dis': before || registering}\"\r\n          v-else-if=\"data.type === 1\"\r\n          v-on:click=\"before || registering || register()\"\r\n        >\r\n          <div class=\"text reg\" v-if=\"!data.registered\">领奖</div>\r\n          <div class=\"text del sml\" v-else>放弃奖品</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"buttons\" v-if=\"data.is_publisher\">\r\n        <div\r\n          class=\"button\"\r\n          v-bind:class=\"{'dis': !before}\"\r\n          v-on:click=\"!before || editActivity()\"\r\n        >\r\n          <div class=\"text edit\">编辑</div>\r\n        </div>\r\n        <div\r\n          class=\"button\"\r\n          v-on:click=\"deleting || delActivity()\"\r\n          v-bind:class=\"{'dis': deleting}\"\r\n        >\r\n          <div class=\"text del\">删除</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'DetailsMain',\r\n  props: ['data', 'before'],\r\n  data () {\r\n    return {\r\n      registering: false,\r\n      deleting: false\r\n    }\r\n  },\r\n  computed: {\r\n    imageUrl () {\r\n      return this.data.image === '' ? this.$global.defaultImg : this.data.image\r\n    }\r\n  },\r\n  mounted () {\r\n    setTimeout(() => {\r\n      this.$emit('con-fade-in')\r\n    }, 100)\r\n  },\r\n  methods: {\r\n    foo (target) {\r\n      console.log(target)\r\n    },\r\n    register () {\r\n      var vm = this\r\n      if ((vm.data.type === 0 && !vm.before) ||\r\n        (vm.data.type === 1 && vm.before)) {\r\n        return\r\n      }\r\n      vm.registering = true\r\n      if (vm.data.registered) {\r\n        vm.$parent.simplePost('/api/user/unregister/', () => {\r\n          vm.$parent.getDetails(() => {\r\n            vm.registering = false\r\n          })\r\n        })\r\n      } else {\r\n        vm.$parent.simplePost('/api/user/register/', () => {\r\n          vm.$parent.getDetails(() => {\r\n            vm.registering = false\r\n          })\r\n        })\r\n      }\r\n    },\r\n    delActivity () {\r\n      var vm = this\r\n      vm.deleting = true\r\n      vm.$parent.simplePost('/api/publisher/delete/', () => {\r\n        vm.$root.$router.replace('/activity')\r\n      })\r\n    },\r\n    editActivity () {\r\n      if (this.before) {\r\n        this.$root.$router.push('/activity/' + this.data.id + '/edit')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#details-main {\r\n  width: 100%;\r\n  padding-bottom: 0.001em;\r\n}\r\n.image {\r\n  background-color: #eee;\r\n  margin: auto;\r\n  margin-top: 0.6em;\r\n  margin-bottom: 0.6em;\r\n  width: 420px;\r\n  height: 236.25px;\r\n}\r\n.image > img {\r\n  display: none;\r\n}\r\n.image > div {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-position: center;\r\n  background-size: cover;\r\n  opacity: 0;\r\n  transition: opacity 0.8s;\r\n}\r\n@media screen and (max-width: 420px) {\r\n  .image {\r\n    width: 100%;\r\n    height: 56.25vw;\r\n  }\r\n}\r\n.content {\r\n  margin: 0 0.96em;\r\n}\r\n.title {\r\n  font-size: 0.7em;\r\n  font-weight: bold;\r\n  color: #fff;\r\n  line-height: 1em;\r\n  margin-bottom: 0.17143em;\r\n}\r\n.options > div {\r\n  font-size: 0.47em;\r\n  color: #fff;\r\n  line-height: 1.6383em;\r\n  margin: 0.06494em 0;\r\n}\r\n.buttons {\r\n  width: 100%;\r\n  height: 0.86em;\r\n  clear: both;\r\n  margin: 0.4em 0 0.6em 0;\r\n}\r\n.button {\r\n  cursor: default;\r\n  float: left;\r\n  width: 2.66em;\r\n  height: 0.86em;\r\n  margin-right: 0.6em;\r\n  margin-left: 0;\r\n  border-radius: 0.25em;\r\n  box-shadow: 0.05em 0.05em 0.05em rgba(0, 0, 0, 0.3);\r\n  background-color: #fff;\r\n  position: relative;\r\n}\r\n.button.dis {\r\n  background-color: #dcdcdc;\r\n}\r\n.button > .text {\r\n  position: absolute;\r\n  font-size: 0.58em;\r\n  width: 100%;\r\n  text-align: center;\r\n  font-weight: bold;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n.button > .reg {\r\n  color: #a1de93;\r\n}\r\n.button > .del {\r\n  color: #ce938f;\r\n}\r\n.button > .edit {\r\n  color: #6c6c6c;\r\n}\r\n.button > .sml {\r\n  font-size: 0.53em;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/ActivityDetailsMain.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"details-main\"}},[_c('div',{staticClass:\"image\",style:(_vm.imageUrl)},[_c('img',{attrs:{\"src\":_vm.imageUrl},on:{\"load\":function($event){$event.target.nextSibling.style.opacity = '1'}}}),_c('div',{style:({backgroundImage: 'url(' + _vm.imageUrl + ')'})})]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.data.title))]),_vm._v(\" \"),(_vm.data.type === 0)?_c('div',{staticClass:\"options\"},[_c('div',[_vm._v(\"类型：志愿者活动\")]),_vm._v(\" \"),_c('div',[_vm._v(\"详情：\"+_vm._s(_vm.data.details))]),_vm._v(\" \"),_c('div',[_vm._v(\"志愿开始时间：\"+_vm._s(_vm.data.action_time))]),_vm._v(\" \"),_c('div',[_vm._v(\"已报名人数：\"+_vm._s(_vm.data.current_member)+\"/\"+_vm._s(_vm.data.member))]),_vm._v(\" \"),_c('div',[_vm._v(\"状态：\"),(_vm.data.registered)?_c('span',[_vm._v(\"已报名\")]):(!_vm.before)?_c('span',[_vm._v(\"活动已开始，不予报名\")]):(_vm.data.member === _vm.data.current_member)?_c('span',[_vm._v(\"报名人数已满\")]):_c('span',[_vm._v(\"可报名\")])])]):(_vm.data.type === 1)?_c('div',{staticClass:\"options\"},[_c('div',[_vm._v(\"类型：福利活动\")]),_vm._v(\" \"),_c('div',[_vm._v(\"详情：\"+_vm._s(_vm.data.details))]),_vm._v(\" \"),_c('div',[_vm._v(\"领取时间：\"+_vm._s(_vm.data.book_time))]),_vm._v(\" \"),_c('div',[_vm._v(\"已领取人数：\"+_vm._s(_vm.data.current_member)+\"/\"+_vm._s(_vm.data.award))]),_vm._v(\" \"),_c('div',[_vm._v(\"状态：\"),(_vm.data.registered)?_c('span',[_vm._v(\"已领奖\")]):(_vm.before)?_c('span',[_vm._v(\"领奖时间未到\")]):(_vm.data.award === _vm.data.current_member)?_c('span',[_vm._v(\"奖品已被领完\")]):(_vm.data.is_department_full)?_c('span',[_vm._v(\"所在部门领取人数已满\")]):_c('span',[_vm._v(\"可领取\")])])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"buttons\"},[(_vm.data.type === 0)?_c('div',{staticClass:\"button\",class:{'dis': !_vm.before || _vm.registering},on:{\"click\":function($event){!_vm.before || _vm.registering || _vm.register()}}},[(!_vm.data.registered)?_c('div',{staticClass:\"text reg\"},[_vm._v(\"报名\")]):_c('div',{staticClass:\"text del sml\"},[_vm._v(\"取消报名\")])]):(_vm.data.type === 1)?_c('div',{staticClass:\"button\",class:{'dis': _vm.before || _vm.registering},on:{\"click\":function($event){_vm.before || _vm.registering || _vm.register()}}},[(!_vm.data.registered)?_c('div',{staticClass:\"text reg\"},[_vm._v(\"领奖\")]):_c('div',{staticClass:\"text del sml\"},[_vm._v(\"放弃奖品\")])]):_vm._e()]),_vm._v(\" \"),(_vm.data.is_publisher)?_c('div',{staticClass:\"buttons\"},[_c('div',{staticClass:\"button\",class:{'dis': !_vm.before},on:{\"click\":function($event){!_vm.before || _vm.editActivity()}}},[_c('div',{staticClass:\"text edit\"},[_vm._v(\"编辑\")])]),_vm._v(\" \"),_c('div',{staticClass:\"button\",class:{'dis': _vm.deleting},on:{\"click\":function($event){_vm.deleting || _vm.delActivity()}}},[_c('div',{staticClass:\"text del\"},[_vm._v(\"删除\")])])]):_vm._e()])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-138d6102\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ActivityDetailsMain.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-138d6102\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ActivityDetailsMain.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ActivityDetailsMain.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ActivityDetailsMain.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-138d6102\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ActivityDetailsMain.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-138d6102\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ActivityDetailsMain.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <div class=\"content\">\r\n      <div class=\"button-export\" v-on:click=\"getFile\">\r\n        <div>导出参与用户信息</div>\r\n      </div>\r\n      <div\r\n        class=\"dep-part\"\r\n        v-for=\"(current, index) in data.current_member_list\"\r\n        v-bind:key=\"'dep' + index\"\r\n      >\r\n        <div class=\"dep\">\r\n          <div\r\n            class=\"text\"\r\n            v-if=\"data.type === 0\"\r\n          >{{ $global.departmentList[index] }}：{{ current }}</div><div\r\n            class=\"text\"\r\n            v-else-if=\"data.type === 1\"\r\n          >{{ $global.departmentList[index] }}：{{ current }}/{{ data.member_list[index] }}</div><div\r\n            v-if=\"current !== 0\"\r\n            class=\"dep-button\"\r\n            v-on:click=\"foldSwitch(index)\"\r\n          ><img src=\"@/assets/img/arrow.png\" v-bind:class=\"{'opened': openedList[index]}\"/></div>\r\n        </div>\r\n        <div v-if=\"openedList[index]\">\r\n          <div v-if=\"!loadingList[index]\">\r\n            <div\r\n              class=\"info\"\r\n              v-for=\"(user, userIndex) in userList[index]\"\r\n              v-bind:key=\"index + 'user' + userIndex\"\r\n            >\r\n              <div class=\"text\">姓名：{{ user.name }}</div>\r\n              <div class=\"text\">学号：{{ user.student_id }}</div>\r\n              <div class=\"text\">手机：{{ user.tele }}</div>\r\n            </div>\r\n          </div>\r\n          <div v-else>\r\n            <div class=\"info loading\">\r\n              <div class=\"loading-box\">\r\n                <loading number=\"3\"/>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Loading from './Loading.vue'\r\nexport default {\r\n  name: 'DetailsDep',\r\n  props: ['data'],\r\n  components: {'loading': Loading},\r\n  data () {\r\n    return {\r\n      usedData: this.data,\r\n      loading: true,\r\n      openedList: [],\r\n      loadingList: [],\r\n      userList: []\r\n    }\r\n  },\r\n  created () {\r\n    this.$global.departmentList.forEach(() => {\r\n      this.openedList.push(false)\r\n      this.userList.push([])\r\n      this.loadingList.push(false)\r\n    })\r\n  },\r\n  mounted () {\r\n    setTimeout(() => {\r\n      this.$emit('con-fade-in')\r\n    }, 100)\r\n  },\r\n  methods: {\r\n    foldSwitch (dep) {\r\n      if (this.openedList[dep]) {\r\n        this.$set(this.openedList, dep, false)\r\n      } else {\r\n        this.$set(this.loadingList, dep, true)\r\n        this.$set(this.openedList, dep, true)\r\n        setTimeout(() => {\r\n          this.getUserInfo(dep)\r\n        }, 100)\r\n      }\r\n    },\r\n    getUserInfo (dep) {\r\n      var vm = this\r\n      vm.$http.post('/api/get-department-user.php', {\r\n        department: dep\r\n      }).then(data => {\r\n        data = data.body\r\n        if (!(data instanceof Object)) {\r\n          return Promise.reject('服务器发生错误')\r\n        } else if (data.err_code) {\r\n          return Promise.reject(data.err_msg)\r\n        } else {\r\n          vm.$set(vm.userList, dep, data.data.users)\r\n          vm.$set(vm.loadingList, dep, false)\r\n        }\r\n      }).catch(data => {\r\n        console.log(data)\r\n        if (data instanceof String) {\r\n          alert(data)\r\n        } else {\r\n          alert('404！该服务暂时不可用')\r\n        }\r\n        vm.$set(vm.openedList, dep, false)\r\n        vm.$set(vm.loadingList, dep, false)\r\n      })\r\n    },\r\n    getFile () {\r\n      var vm = this\r\n      vm.$parent.simplePost('/api/manager/download/')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.content {\r\n  margin: 0 0.96em;\r\n}\r\n.button-export {\r\n  cursor: default;\r\n  margin: 0.4em 0;\r\n  width: 5.2em;\r\n  height: 0.92em;\r\n  border-radius: 0.25em;\r\n  box-shadow: 0.05em 0.05em 0.05em rgba(0, 0, 0, 0.3);\r\n  background-color: #fff;\r\n  position: relative;\r\n}\r\n.button-export > div {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 0;\r\n  transform: translateY(-50%);\r\n  color: #a1de93;\r\n  font-size: 0.6em;\r\n  width: 100%;\r\n  text-align: center;\r\n}\r\n.dep-part {\r\n  margin-bottom: 0.6em;\r\n}\r\n.dep {\r\n  height: 0.6em;\r\n}\r\n.dep > .text {\r\n  display: inline-block;\r\n  vertical-align: top;\r\n  font-size: 0.6em;\r\n  margin-right: 1em;\r\n  height: 1em;\r\n  line-height: 1em;\r\n  font-weight: bold;\r\n  color: #fff;\r\n}\r\n.dep-button {\r\n  display: inline-block;\r\n  vertical-align: top;\r\n  height: 0.6em;\r\n  width: 0.6em;\r\n  border-radius: 0.05em;\r\n  background-color: #fff;\r\n  position: relative;\r\n  box-shadow: 0.05em 0.05em 0.05em rgba(0, 0, 0, 0.3);\r\n}\r\n.dep-button > img {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  height: 0.27em;\r\n  width: 0.47em;\r\n  transform: translate(-50%, -50%);\r\n  transition: transform 0.2s;\r\n}\r\n.dep-button > img.opened {\r\n  transform: translate(-50%, -50%) rotate(180deg);\r\n}\r\n.info {\r\n  margin-top: 0.15em;\r\n  padding: 0.15em 0;\r\n  width: 100%;\r\n  background-color: rgba(49, 49, 49, 0.4);\r\n  border-radius: 0.05em;\r\n  position: relative;\r\n}\r\n.info.loading {\r\n  height: 1.75em;\r\n}\r\n.info > .text {\r\n  font-size: 0.45em;\r\n  margin: 0 0.33333em 0.33333em;\r\n  height: 1em;\r\n  line-height: 1em;\r\n  color: #fff;\r\n}\r\n.info > .text:last-of-type {\r\n  margin-bottom: 0;\r\n}\r\n.loading-box {\r\n  position: absolute;\r\n  height: 0.4em;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/ActivityDetailsDep.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"button-export\",on:{\"click\":_vm.getFile}},[_c('div',[_vm._v(\"导出参与用户信息\")])]),_vm._v(\" \"),_vm._l((_vm.data.current_member_list),function(current,index){return _c('div',{key:'dep' + index,staticClass:\"dep-part\"},[_c('div',{staticClass:\"dep\"},[(_vm.data.type === 0)?_c('div',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.$global.departmentList[index])+\"：\"+_vm._s(current))]):(_vm.data.type === 1)?_c('div',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.$global.departmentList[index])+\"：\"+_vm._s(current)+\"/\"+_vm._s(_vm.data.member_list[index]))]):_vm._e(),(current !== 0)?_c('div',{staticClass:\"dep-button\",on:{\"click\":function($event){_vm.foldSwitch(index)}}},[_c('img',{class:{'opened': _vm.openedList[index]},attrs:{\"src\":require(\"@/assets/img/arrow.png\")}})]):_vm._e()]),_vm._v(\" \"),(_vm.openedList[index])?_c('div',[(!_vm.loadingList[index])?_c('div',_vm._l((_vm.userList[index]),function(user,userIndex){return _c('div',{key:index + 'user' + userIndex,staticClass:\"info\"},[_c('div',{staticClass:\"text\"},[_vm._v(\"姓名：\"+_vm._s(user.name))]),_vm._v(\" \"),_c('div',{staticClass:\"text\"},[_vm._v(\"学号：\"+_vm._s(user.student_id))]),_vm._v(\" \"),_c('div',{staticClass:\"text\"},[_vm._v(\"手机：\"+_vm._s(user.tele))])])})):_c('div',[_c('div',{staticClass:\"info loading\"},[_c('div',{staticClass:\"loading-box\"},[_c('loading',{attrs:{\"number\":\"3\"}})],1)])])]):_vm._e()])})],2)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7de4b0e7\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ActivityDetailsDep.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7de4b0e7\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ActivityDetailsDep.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ActivityDetailsDep.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ActivityDetailsDep.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7de4b0e7\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ActivityDetailsDep.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7de4b0e7\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ActivityDetailsDep.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <div class=\"not-exist\" v-if=\"!isActivityExist\">\r\n      你访问的活动已被删除\r\n    </div>\r\n    <details-main\r\n      v-else-if=\"currentQueryType === 0 && inited\"\r\n      v-bind:data=\"data\"\r\n      v-bind:before=\"timeBefore\"\r\n      v-on:con-fade-in=\"$emit('con-fade-in')\"\r\n      v-on:con-fade-out=\"$emit('con-fade-out')\"\r\n    />\r\n    <details-dep\r\n      v-else-if=\"currentQueryType === 1 && inited\"\r\n      v-bind:data=\"depData\"\r\n      v-on:con-fade-in=\"$emit('con-fade-in')\"\r\n      v-on:con-fade-out=\"$emit('con-fade-out')\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DetailsMain from './ActivityDetailsMain.vue'\r\nimport DetailsDep from './ActivityDetailsDep.vue'\r\nexport default {\r\n  name: 'ActivityDetails',\r\n  components: {\r\n    'details-main': DetailsMain,\r\n    'details-dep': DetailsDep\r\n  },\r\n  props: ['meta'],\r\n  data () {\r\n    return {\r\n      usedMeta: this.meta,\r\n      currentQueryType: 0,\r\n      isActivityExist: true,\r\n      timeBefore: false,\r\n      data: {},\r\n      depData: {},\r\n      inited: false\r\n    }\r\n  },\r\n  watch: {\r\n    '$route.params.id' () {\r\n      this.$emit('con-fade-out')\r\n      this.getDetails()\r\n    }\r\n  },\r\n  beforeRouteLeave (to, from, next) {\r\n    this.$emit('con-fade-out')\r\n    setTimeout(() => {\r\n      next()\r\n    }, 100)\r\n  },\r\n  beforeCreate () {\r\n    if (!this.$global.logined) {\r\n      this.$root.$router.replace('/login')\r\n    }\r\n  },\r\n  created () {\r\n    if (this.$global.logined) {\r\n      this.getDetails()\r\n      setTimeout(() => {\r\n        this.usedMeta.queryTypes = ['活动详情']\r\n        this.usedMeta.value = 0\r\n        this.usedMeta.back = this.back\r\n        this.usedMeta.flush = this.query\r\n        if (this.$global.isManager) {\r\n          this.usedMeta.queryTypes.push('各部门情况')\r\n        }\r\n      }, 100)\r\n      setTimeout(() => {\r\n        this.$emit('nav-fade-in')\r\n      }, 200)\r\n    }\r\n  },\r\n  methods: {\r\n    back () {\r\n      this.$root.$router.push('/activity')\r\n    },\r\n    query (type) {\r\n      this.currentQueryType = type\r\n      if (!this.ActivityExist) {\r\n        setTimeout(() => {\r\n          this.$emit('con-fade-in')\r\n        }, 100)\r\n      }\r\n    },\r\n    getDetails (fn) {\r\n      var vm = this\r\n      vm.$http.post('/api/get-activity.php', {\r\n        type: 0,\r\n        start_id: vm.$route.params.id,\r\n        number: 1\r\n      }).then(data => {\r\n        data = data.body\r\n        if (!(data instanceof Object)) {\r\n          return Promise.reject('服务器发生错误')\r\n        } else if (data.err_code) {\r\n          return Promise.reject(data.err_msg)\r\n        } else {\r\n          data = data.data\r\n          vm.isActivityExist = data.activities instanceof Array &&\r\n            data.activities.length === 1 &&\r\n            data.activities[0].id === Number(vm.$route.params.id)\r\n          if (vm.isActivityExist) {\r\n            vm.data = data.activities[0]\r\n            if (vm.data.type === 0) {\r\n              vm.timeBefore = vm.$global.compareDatetime(vm.data.action_time) > 0\r\n            } else if (vm.data.type === 1) {\r\n              vm.timeBefore = vm.$global.compareDatetime(vm.data.book_time) > 0\r\n            }\r\n            if (this.$global.isManager) {\r\n              return vm.$http.post('/api/department.php', {\r\n                id: vm.$route.params.id\r\n              })\r\n            }\r\n          } else {\r\n            vm.data = {}\r\n          }\r\n        }\r\n        return Promise.reject(0)\r\n      }).then(data => {\r\n        data = data.body\r\n        if (!(data instanceof Object)) {\r\n          return Promise.reject('服务器发生错误')\r\n        } else if (data.err_code) {\r\n          return Promise.reject(data.err_msg)\r\n        } else {\r\n          vm.depData = data.data\r\n          vm.$set(vm.depData, 'type', vm.data.type)\r\n        }\r\n        return Promise.reject(0)\r\n      }).catch(data => {\r\n        if (fn !== undefined) {\r\n          fn()\r\n        }\r\n        if (data === 0) {\r\n          setTimeout(() => {\r\n            this.$emit('con-fade-in')\r\n          }, 100)\r\n          this.inited = true\r\n        } else if (data instanceof String) {\r\n          alert(data)\r\n        } else {\r\n          alert('404！该服务暂时不可用')\r\n        }\r\n      })\r\n    },\r\n    simplePost (route, fn) {\r\n      var vm = this\r\n      vm.$http.post(route + vm.data.id).then(data => {\r\n        data = data.body\r\n        if (!(data instanceof Object)) {\r\n          alert('服务器发生错误')\r\n        } else if (data.err_code) {\r\n          alert(data.err_msg)\r\n        }\r\n        if (fn !== undefined) {\r\n          fn()\r\n        }\r\n      }).catch(data => {\r\n        alert('404！该服务暂时不可用')\r\n        if (fn !== undefined) {\r\n          fn()\r\n        }\r\n      })\r\n    },\r\n    getFile () {\r\n      var vm = this\r\n      vm.simplePost('/api/manager/download/')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.not-exist {\r\n  margin: 0.6em 1.37143em 0;\r\n  font-size: 0.7em;\r\n  font-weight: bold;\r\n  color: #fff;\r\n  line-height: 1em;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/ActivityDetails.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.isActivityExist)?_c('div',{staticClass:\"not-exist\"},[_vm._v(\"\\n    你访问的活动已被删除\\n  \")]):(_vm.currentQueryType === 0 && _vm.inited)?_c('details-main',{attrs:{\"data\":_vm.data,\"before\":_vm.timeBefore},on:{\"con-fade-in\":function($event){_vm.$emit('con-fade-in')},\"con-fade-out\":function($event){_vm.$emit('con-fade-out')}}}):(_vm.currentQueryType === 1 && _vm.inited)?_c('details-dep',{attrs:{\"data\":_vm.depData},on:{\"con-fade-in\":function($event){_vm.$emit('con-fade-in')},\"con-fade-out\":function($event){_vm.$emit('con-fade-out')}}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5f9bcebc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ActivityDetails.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5f9bcebc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ActivityDetails.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ActivityDetails.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ActivityDetails.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5f9bcebc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ActivityDetails.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5f9bcebc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ActivityDetails.vue\n// module id = null\n// module chunks = ","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAbCAYAAADszNYXAAAEtUlEQVRYhcWX3YtW1xWHn9/a+5z3Q1GxKbWN0NI/IBe5y3UIBEqJH6BF1E6Qkl72MonvODrO2PQvMLEFUbQqOBhICyEgvQzkIkJuvAplQB2ntUnMTOa8zjlnr1y8b2w7+n7MOCG/q8PZa+397LU/1l56b/FddpZNco8H/tW9vy+3/DmZfQqc9eT/TKrpVgV7dh9mV2s3H/MZ95mjoknxxY/Z+eBrVrZnpIZRdZ1Q5shXqZJT5U3iapdowpVTZ6vEprBHifbDki+e20Zr57+JdNnFfl7iBe4Xd3j/ziWaoYXJQPwSt9+7pxdLX33wk8ZPb6xSXnvIV8TkNSvl8rvLdfVGIzRxHHd/GfgDYi/O3/nBpF/h3ADPJNFQk/88enAwhPBqCvXr9nz60a+7VfGGzHD8fz0z4G/Aaz8MOK/1x8++++E4MlFUKxO7ws/2Wnd1+Vi0iNCgTt4H9rTDlscdfB/6rt/+OHv64z4hIaJlFNXKby0ouvtgIMmovLpxp5jfBxCImz4BxwlEAO4U8/sqr25INtjeHcPcsjw7m6gHwyPacSs3Fz+Yu7c0v38bOxCDO96IhLGNHdxbmt9/c/GDuXbcOmwnkKjJ8/ysLaSFj9pxy+ywYOaW0wwtPrw7d/320q0DO9iONin6wtnBdm4v3Trw4d25683QIrd8sINDO26ZXUgLH1luDSpPnSTeGWSfPNEKbTyDxbufX6uWqoMiMiQ445IjItVSdXDx7ufXPINWaJM8DXRJ4p3KUye3Rm+jqffzLXdc8NagCWQhJ7qzeC+7+ugXudp5urpRfgFZnvjq0dbfFPdWr7SjoRCGgjv80cXb1vvun5J+C/K3Bcldxwd5WxS1MtICV2IszTP+uhF4zyB+WR5KlS7XMcOCM+TeQPJZhw6uxyu+5uQJyTuSnxk4qIOC06gTReGXv5EdiesMfxR8IztSFH65USc0GvyM5J21+/Sp14bkx4HZgb15z9MjrNTxYlnaUdl4B1jmlKUdXanjRY99guGus32eJ/R0+F4u6yS3maEggBl0C79QdtNRC8PBLUDZTUe7hV8wG33ek9uMo86gm23ohe2uSXedHmYjQAbVsi6kQhMMmkCAVGiiWtYFjQHurtPumhxmMzLbuHTC0fRQI4Eh6jKdTykd0xoyCVJKx+oynTc0ktzRtEsnRrHFUQYAbpoiIeGDIyGQRFVWfxHJFOzPADJRV+l3FdU52eiT7eh0f7yRGi/Pe38FpFOjTAVUrnMJTRhOQhOV69w4F5JLp1w6MW7yHivyj2WcdMeVODnUTsJrP08qX3H3Q6zdR0+RGycRp8aJ+H9x1ivTKeRTY0UnpUMjbXrJcQobvapPoKzXoffO9GmjnhptOjriRj0lfHojD6UNvm17ExBpaqNvSwdE2jA4bBi+V0CYmA5mk+udgAPBbNLE9LMUNs9UVfQhZsxsclwIxzGzyWA286wVwTOXRO5OlM0ErDMKxoGAdaJsZljpOa42pZ5znCDNBuc4LrSGSw64CM7xIM1uVg28acVor4jWGYX0ZrL/ayAZKKQ3AzqzmcX7+pLUCFktVrdWf0quT1pL2eHa0s/Nbb7bKi8F+T/yhw3qMZ/O4+hbyuAWosD/gOcAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/img/arrow.png\n// module id = qNF3\n// module chunks = 3"],"sourceRoot":""}